<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>
    
    <template id="question_container_inherit" inherit_id="survey.question_container" name="Survey: question container">

        <!-- Description plus visible -->
        <xpath expr="//div[@t-field='question.description']" position="attributes">
            <attribute name="class">p-1 fs-5 oe_no_empty mt-1 text-break</attribute>
        </xpath>


        <xpath expr="//div[@t-field='question.description']" position="before">
            <div t-if="question.question_image or question.question_audios " t-field='question.description' class="">
                <div t-if="question.question_image" t-field="question.question_image"
                class=" d-flex my-3 justify-content-center"
                t-options="{'widget': 'image', 'alt-field': 'name', 'itemprop': 'image'}"/>
                
            </div>
           <t t-foreach="question.question_audios" t-as="audio">
                <div>
                    <audio controls="1" autoplay="1" style="width: 100%">
                        <source t-att-src="'/web/content/' + str(audio.id) + '?download=true'" type="audio/mpeg"/>
                        Your browser does not support the audio element.
                    </audio>
                </div>
            </t>
            
        </xpath>

        
    </template>

    <template id="survey_fill_form_done_inherit_test" inherit_id="survey.survey_fill_form_done">
            <xpath  expr="//div[hasclass('o_survey_finished')]" position="attributes">
                <attribute name="t-if">survey.entry_test == False</attribute>
            </xpath>
            <xpath  expr="//div[hasclass('o_survey_finished')]" position="after">
                <div t-if="survey.entry_test">
                    <h1 class="text-center text-primary">Test terminé !!!</h1>
                    <div class="text-center">Nous vous remercions d'avoir éffectué ce test </div>
                    <h3 class="">Resultats:</h3>
                    <div class="p-4 pt-0 row mt-4">
                        <div class="col-12 col-md-4 text-success text-center">
                            <strong> <span style="font-size: 5rem"><t t-esc="answer.scoring_total"/></span> points</strong>
                        </div>
                        <div class="col-12 col-md-4 text-warning text-center">
                            <strong><span style="font-size: 5rem"><t t-esc="answer.scoring_percentage" /></span>%</strong>
                        </div>
                        <div class="col-12 col-md-4 text-danger text-center">
                            <strong><span  style="font-size: 5rem"><t t-esc="answer._compute_recommended_hours()" /></span></strong> h de cours au minimun
                        </div>
                    </div>
                </div>
            
            </xpath>
        
    </template>
    
    </data>
    

</odoo>
